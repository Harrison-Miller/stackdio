<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>stackd.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'>

    <link href="/static/css/theme/jquery-ui-1.10.3.custom.min.css" rel="stylesheet">
    <link href="/static/stackdio/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/stackdio/bower_components/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">
    <link href="/static/css/stackdio.css" rel="stylesheet">
</head>

<body class="bootstrap-admin-with-small-navbar">

    <!-- 
        ======================================================================
         N A V I G A T I O N
        ======================================================================
     -->
    <nav class="navbar navbar-default navbar-fixed-top bootstrap-admin-navbar-sm" role="navigation">
        <div class="">
            <div class="row">
                <div class="collapse navbar-collapse">

                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#" class="light product" data-bind="click: showWelcomeScreen">stackd.io</a>
                            <!-- <div class="light product" href="#">stackd.io</div> -->
                        </li>
                    </ul>

                    <ul class="nav navbar-nav" data-bind="foreach: sections">
                        <li data-bind="click: $root.gotoSection">
                          <a href="#" data-bind="attr: { class: icon }, visible: visible, css: { active: $data === $root.currentSection() }">
                            <span data-bind="text: id"></span>
                          </a>
                        </li>
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-user"></span>
                                Your Account
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu original-dropdown-menu" role="menu">
                                <li><a href="#" data-bind="click: showUserProfile">User Profile</a></li>
                                <li><a href="#" data-bind="click: showPasswordForm">Change Password</a></li>
                                <li class="divider"></li>
                                <li><a href="#" data-bind="click: function () { $root.gotoSection(_.findWhere(sections, {id:'Accounts'})) }">Your Cloud Accounts</a></li>
                                <li class="divider"></li>
                                <li><a href="/logout">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
        <ul class="nav navbar-nav">
            <li><a href="http://github.com/stackdio/stackdio" target="_blank">source</a></li>
            <li><a href="http://twitter.com/stackdio" target="_blank">@stackdio</a></li>
        </ul>
    </nav>

    <!-- 
        ======================================================================
        M E S S A G E S
        ======================================================================
     -->
    <div class="view">
        <div id="alert-default-security-groups" class="alert hide alert-success">            
            <div><strong>Account created!</strong></div>
            <div style="padding:10px 0;">Do you want to define any default security groups that will be assigned to all hosts created under this account?</div>
            <button class="btn btn-inverted" data-bind="click: function () { $('#alert-default-security-groups').hide(); }">Non</button>
            <button class="btn btn-primary" data-bind="click: $root.securityGroup.setForAccount">Oui</button>
        </div>

        <div id="alert-error" class="alert hide alert-error">
            <button type="button" class="close" data-bind="click: closeError">&times;</button>
            <h4>Error!</h4>
            <div id="alert-error-details"></div>
        </div>

        <div id="alert-success" class="alert hide alert-success">
            <button type="button" class="close" data-bind="click: closeSuccess">&times;</button>
            <strong>Success!</strong> 
        </div>

        <div id="alert-no-profiles" class="alert hide alert-warning">
            <button type="button" class="close" data-bind="click: function () { $('#alert-no-profiles').hide(); }">&times;</button>
            <strong>Warning!</strong> You do not have any profiles created yet. Please create one now.
        </div>

        <div id="alert-no-accounts" class="alert hide alert-warning">
            <button type="button" class="close" data-bind="click: function () { $('#alert-no-accounts').hide(); }">&times;</button>
            <strong>Warning!</strong> You do not have any accounts created yet. Please create one now.
        </div>
    </div>

    <!-- 
        ======================================================================
        U S E R   P A S S W O R D
        ======================================================================
     -->
    <div id="user-password" title="Change Password" class="hide" data-bind="">
        <form id="user-password-form" role="form" class="form-horizontal">
            <div class="modal-body">

                <div class="form-group">
                    <label for="current_password" class="col-sm-4 control-label">Current password</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" id="current_password">
                    </div>
                </div>

                <div class="form-group">
                    <label for="new_password" class="col-sm-4 control-label">New password</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" id="new_password">
                    </div>
                </div>

                <div class="form-group">
                    <label for="new_password_confirm" class="col-sm-4 control-label">Confirm</label>
                    <div class="col-sm-8">
                        <input type="password" class="form-control" id="new_password_confirm">
                    </div>
                </div>

                <div id="password-error" class="alert hide alert-error">
                    <button type="button" class="close" data-bind="click: closeError">&times;</button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" data-bind="click: $root.savePassword">Save</button>
                <button class="btn" data-bind="click: $root.closePasswordForm">Cancel</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        U S E R   P R O F I L E
        ======================================================================
     -->
    <div id="user-profile" title="Your Profile" class="hide" data-bind="">
        <form id="user-profile-form" role="form" class="form-horizontal">
            <div class="modal-body">

                <div class="form-group">
                    <label for="first_name" class="col-sm-3 control-label">First name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control disabled" id="first_name" value="{{ user.first_name }}" disabled>
                    </div>
                </div>

                <div class="form-group">
                    <label for="last_name" class="col-sm-3 control-label">Last name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="last_name" value="{{ user.last_name }}" disabled>
                    </div>
                </div>

                <div class="form-group">
                    <label for="public_key" class="col-sm-3 control-label">Public key</label>
                    <div class="col-sm-9">
                        <textarea id="public_key" class="form-control" rows="8"></textarea>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" data-bind="click: $root.saveProfile">Save</button>
                <button class="btn" data-bind="click: $root.closeProfileForm">Cancel</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        W E L C O M E   S C R E E N
        ======================================================================
     -->
    <div id="blueprints-binding-target" data-bind='visible: $root.currentSection().id === "Welcome"' class="hide">
        <div class="view">

            <div class="row bottom-separation-large">
                <div class="col-md-12 welcome-heading">Welcome to stackd.io</div>
            </div>

            <div class="row ">
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12 medium-heading light">Launch a Stack</div>
                        <div class="col-md-12 section-synopsis light">
                            You can quickly launch a Stack by searching for Blueprints here. You can optionally provide a title, description, and namespace for the Stack.
                        </div>
                        <div class="col-md-12 bottom-separation-large">
                            <input type="text" class="form-control" id="blueprint_search" placeholder="Find the Blueprint you want to use...">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 medium-heading light">Locate any resource</div>
                        <div class="col-md-12 section-synopsis light">
                            You can search your stackd.io database for Blueprints, Formulas, or Stacks.
                        </div>
                        <div class="col-md-12 bottom-separation-large">
                            <input type="text" class="form-control" id="resource_search" placeholder="Start searching...">
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-md-offset-1">
                    <div class="row">
                        <div class="col-md-12 medium-heading light">Your Running Stacks</div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <table id="stacks" class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width:20%">Title</th>
                                        <th style="width:40%">Description</th>
                                        <th style="width:30%">Hosts</th>
                                        <th style="width:10%"></th>
                                    </tr>
                                </thead>
                                <tbody data-bind="foreach: stores.Stacks">
                                    <tr>
                                        <td data-bind="text: title"></td>
                                        <td data-bind="text: description"></td>
                                        <td>
                                            <a href="#" 
                                               data-bind="text: hosts.length + ' hosts',
                                                          click: $root.blueprint.showBlueprintHostList"></a>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <a class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" href="#">
                                                    Action <span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu original-dropdown-menu">
                                                    <li>
                                                        <a href="#" data-bind="text: 'Delete', click: $root.blueprint.deleteBlueprint"></a>
                                                    </li>
                                                    <li>
                                                        <a href="#" data-bind="text: 'Launch Stack', click: $root.stack.launchStack"></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>     
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 
        ======================================================================
        B L U E P R I N T   L I S T
        ======================================================================
     -->
    <div id="blueprints-binding-target" data-bind='visible: $root.currentSection().id === "Blueprints"' class="hide">
        <div class="view">

            <div class="row bottom-separation">
                <div class="col-md-4 large-heading">Blueprints</div>
                <div class="col-md-4 col-md-offset-4">
                    <div class="btn-group pull-right small-top-separation">
                        <button class="btn btn-primary" data-bind="click: $root.blueprint.showBlueprintForm">New Blueprint</button>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-md-12 section-synopsis">
                    Blueprints allow you to quickly define anyting from a single machine, to an entire 200 node Hadoop cluster. You can specify host name templates, provisioning orchestration, and custom properties for any Stacks launched from your Blueprint. 
                </div>
            </div>

            <table id="stacks" class="table table-bordered">
                <thead>
                    <tr>
                        <th style="width:20%">Title</th>
                        <th style="width:40%">Description</th>
                        <th style="width:30%">Hosts</th>
                        <th style="width:10%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.Blueprints">
                    <tr>
                        <td>
                            <a href="#" data-bind="text: title"></a>
                        </td>
                        <td data-bind="text: description"></td>
                        <td>
                            <a href="#" 
                               data-bind="text: host_definitions.length + ' hosts',
                                          click: $root.blueprint.showBlueprintHostList"></a>
                        </td>
                        <td>
                            <div class="btn-group">
                                <a class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text: 'Delete', click: $root.blueprint.deleteBlueprint"></a>
                                    </li>
                                    <li>
                                        <a href="#" data-bind="text: 'Launch Stack', click: $root.stack.launchStack"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>
    </div>

    <!-- 
        ======================================================================
        B L U E P R I N T   H O S T   L I S T
        ======================================================================
     -->
    <div id="blueprint-host-list-container" title="Blueprint Hosts"  data-bind="" class="stackd-form form-small hide">
        <div class="modal-body">
            <table id="blueprint_host_list" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Components</th><th>Count</th><th>Size</th><th>Host Pattern</th><th>Access Rules</th><th></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: $root.blueprint.selectedBlueprintHosts">
                    <tr>
                        <td data-bind="text: count"></td>
                        <td data-bind="text: hostname_template"></td>
                        <td data-bind="text: instance_size.title"></td>
                        <td data-bind="text: hostname_template"></td>
                        <td data-bind="text: rules"></td>
                    </tr>     
                </tbody>
            </table>
        </div>

        <div class="modal-footer">
            <button class="btn" data-bind="click: $root.blueprint.closeBlueprintHostList">Close</button>
        </div>
    </div>

    <!-- 
        ======================================================================
        B L U E P R I N T   F O R M
        ======================================================================
     -->
    <div id="blueprint-form-container" title="Blueprint Details"  data-bind="" class="stackd-form hide">
        <form id="blueprint-form" role="form" class="form-inline">
            <div class="modal-body">
                <div class="row bottom-separation">
                    <div class="col-md-5">
                        <label class="sr-only" for="blueprint_title">Title</label>
                        <input type="text" class="form-control" id="blueprint_title" placeholder="Blueprint title">
                    </div>
                    <div class="col-md-5">
                        <label class="sr-only" for="blueprint_purpose">Description</label>
                        <input type="text" class="form-control" id="blueprint_purpose" placeholder="Purpose of blueprint">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5">
                        <div class="checkbox">
                            <label>
                                <input id="public_blueprint" type="checkbox" value=""> Public Blueprint
                            </label>
                        </div>
                    </div>
                </div>

                <div class="row top-separation bottom-separation">
                    <div class="col-md-4 small-heading">Blueprint Hosts</div>
                    <div class="col-md-4 col-md-offset-4">
                        <div class="btn-group pull-right">
                            <a class="btn btn-primary dropdown-toggle" style="color: #fff" data-toggle="dropdown" href="#">
                                Add Host <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" data-bind="foreach: stores.Profiles">
                                <li>
                                    <a href="#" data-bind="text: title, click: $root.blueprint.showHostForm"></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <table id="blueprint_hosts" class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Components</th><th>Count</th><th>Size</th><th>Host Pattern</th><th>Access Rules</th><th></th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: stores.NewHosts">
                                <tr>
                                    <td data-bind="html: flat_components"></td>
                                    <td data-bind="text: count"></td>
                                    <td data-bind="text: instance_size.title"></td>
                                    <td data-bind="text: hostname_template"></td>
                                    <td data-bind="html: flat_access_rules"></td>
                                    <td>
                                        <a class="linkify" data-bind="click: $root.blueprint.removeHost"> Delete </a>
                                    </td>
                                </tr>     
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="row top-separation bottom-separation">
                    <div class="col-md-12 small-heading">Blueprint Properties</div>
                    <div class="col-md-12">
                        <textarea  
                               class="form-control" 
                               rows="3" 
                               id="blueprint_properties" 
                               data-bind="text: JSON.stringify($root.blueprint.blueprintProperties(), undefined, 3)"
                               placeholder="If you select a formula that has default properties, they will be shown here"></textarea>
                    </div>
                </div>

                <div class="row top-separation bottom-separation">
                    <div class="col-md-12">
                        <a class="linkify" href="#" data-bind="click: $root.blueprint.showOrchestration">Define component orchestration</a>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.blueprint.closeBlueprintForm">Close</button>
                <button class="btn btn-info" data-bind="click: $root.blueprint.saveBlueprint">Save</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        N E W   H O S T   F O R M
        ======================================================================
     -->
    <div id="host-form-container" title="Host Details" data-bind="" class="hide">
        <form id="blueprint-host-form" role="form" class="form-horizontal">
            <div class="modal-body large-modal-body">

                <div class="form-group">
                    <label for="formula_components" class="col-sm-4 control-label">Install Component(s)</label>
                    <div class="col-sm-8">
                        <select id="formula_components" 
                                data-bind="foreach: { data: stores.Formulae, as: 'formula' }, 
                                           optionsCaption: 'Choose what to install...'"
                                data-size="12"
                                data-container="body"
                                multiple
                                class="form-control selectpicker">
                            <optgroup data-bind="attr: {label: title}, foreach: components">
                                <option data-bind="text: title, value: $parent.id + '|' + id"></option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="host_count" class="col-sm-4 control-label">Count</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="host_count" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="host_instance_size" class="col-sm-4 control-label">Instance size</label>
                    <div class="col-sm-8">
                        <select id="host_instance_size" 
                                data-bind="options: stores.InstanceSizes, 
                                           optionsValue: 'id',
                                           optionsText: 'title',
                                           optionsCaption: 'Choose size...'"
                                data-size="12"
                                data-container="body"
                                class="form-control selectpicker"></select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="availability_zone" class="col-sm-4 control-label">Availability zone</label>
                    <div class="col-sm-8">
                        <select id="availability_zone" 
                                data-bind="options: stores.Zones, 
                                           optionsValue: 'id',
                                           optionsText: 'title',
                                           optionsCaption: 'Choose a zone...'"
                                data-container="body"
                                class="form-control selectpicker"></select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="host_hostname" class="col-sm-4 control-label">Host pattern</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="host_hostname" placeholder="e.g. dn-{username}-{index}">
                    </div>
                </div>

                <div class="form-group">
                    <label for="host_access_rules" class="col-sm-4 control-label">Access rules</label>
                    <div class="col-sm-8 form-link-valign">
                        <a style="margin-right: 30px;"
                           data-bind="visible: stores.HostAccessRules().length > 0, 
                                      text: stores.HostAccessRules().length + ' rules',
                                      click: $root.securityGroup.openRulesList"></a>
                        <a data-bind="click: $root.securityGroup.openAccessRuleForm">Add</a>
                    </div>
                </div>

                <div class="form-group">
                    <label for="host_volumes" class="col-sm-4 control-label">Volumes</label>
                    <div class="col-sm-8 form-link-valign">
                        <a style="margin-right: 30px;"
                           data-bind="visible: stores.HostVolumes().length > 0, 
                                      text: stores.HostVolumes().length + ' volumes',
                                      click: $root.volume.showVolumeList"></a>
                        <a data-bind="click: $root.volume.showVolumeForm">Add</a>
                    </div>
                </div>

                <div class="form-group">
                    <label for="spot_instance" class="col-sm-4 control-label"></label>
                    <div class="col-sm-8">
                        <input type="checkbox" id="spot_instance"> Request spot instances
                    </div>
                </div>

                <div class="form-group" data-bind="visible: stack.isSpotInstance">
                    <label for="spot_instance_price" class="col-sm-4 control-label"></label>
                    <div class="col-sm-8">
                        <input type="text" id="spot_instance_price" class="form-control" placeholder="Bid price for instances">
                    </div>
                </div>
            </div>  
    
            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.blueprint.closeHostForm">Close</button>
                <button class="btn btn-primary" data-bind="click: $root.blueprint.addHost">Save</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        N E W   A C C E S S   R U L E   L I S T   D I A L O G
        ======================================================================
     -->
    <div id="host-access-rule-list-container" title="Access Rules List" data-bind="" class="hide">
        <div class="modal-body large-modal-body">
            <table class="table table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>Protocol</th>
                        <th>From Port</th>
                        <th>To Port</th>
                        <th>Rule</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.HostAccessRules">
                    <tr>
                        <td data-bind="text: protocol"></td>
                        <td data-bind="text: from_port"></td>
                        <td data-bind="text: to_port"></td>
                        <td data-bind="text: rule"></td>
                        <td>
                            <a class="linkify" data-bind="click: $root.securityGroup.deleteHostAccessRule"> Delete </a>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>

        <div class="modal-footer">
            <button class="btn" data-bind="click: $root.securityGroup.closeRulesList">Close</button>
        </div>
    </div>

    <!-- 
        ======================================================================
        C O M P O N E N T   O R C H E S T R A T I O N   D I A L O G
        ======================================================================
     -->
    <div id="component-orchestration-container" title="Component Provisioning Order" data-bind="" class="hide">
        <form id="orchestration-form" role="form" class="form-horizontal">
            <div class="modal-body large-modal-body">
                <table id="component_list" class="table table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Path</th>
                            <th style="width:50px;"></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: stores.BlueprintComponents">
                        <tr>
                            <td data-bind="text: title"></td>
                            <td data-bind="text: sls_path"></td>
                            <td>
                                <input type="text" class="form-control" data-bind="attr: { id: 'component_order_' + id }">
                            </td>
                        </tr>     
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.blueprint.closeOrchestration">Close</button>
                <button class="btn btn-primary" data-bind="click: $root.blueprint.saveOrchestration">Save</button>
            </div>
        </form>
    </div>
    <!-- 
        ======================================================================
        N E W   V O L U M E   L I S T   D I A L O G
        ======================================================================
     -->
    <div id="host-volume-form-list-container" title="Volume List" data-bind="" class="hide">
        <div class="modal-body large-modal-body">
            <table id="host_volumes" class="table table-bordered table-condensed" 
                   data-bind="visible: stores.HostVolumes().length > 0">
                <thead>
                    <tr>
                        <th>Snapshot</th>
                        <th>Mount point</th>
                        <th style="width:50px;"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.HostVolumes">
                    <tr>
                        <td data-bind="text: snapshot.title"></td>
                        <td data-bind="text: mount_point"></td>
                        <td>
                            <a class="linkify" data-bind="click: $root.volume.removeHostVolume"> Delete </a>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>

        <div class="modal-footer">
            <button class="btn" data-bind="click: $root.volume.closeVolumeList">Close</button>
        </div>
    </div>

    <!-- 
        ======================================================================
        N E W   V O L U M E   D I A L O G
        ======================================================================
     -->
    <div id="host-volume-form-container" title="Volume Details" data-bind="" class="hide">
        <form id="host-volume-form" role="form" class="form-horizontal">
            <div class="modal-body large-modal-body">

                <div class="form-group">
                    <label for="volume_snapshot" class="col-sm-4 control-label">Snapshot</label>
                    <div class="col-sm-8">
                        <select id="volume_snapshot" class="form-control" data-bind="options: stores.Snapshots, optionsValue: 'id', optionsText: 'title'"></select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="volume_device" class="col-sm-4 control-label">Device</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="volume_device" placeholder="Device name">
                    </div>
                </div>

                <div class="form-group">
                    <label for="volume_mount_point" class="col-sm-4 control-label">Mount point</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="volume_mount_point" placeholder="/mnt/x">
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.volume.closeVolumeForm">Close</button>
                <button class="btn btn-primary" data-bind="click: $root.volume.addHostVolume">Save</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        H O S T   A C C E S S   R U L E   D I A L O G
        ======================================================================
    -->
    <div id="host-access-rule-container" title="New Access Rule" class="stackd-form hide" data-bind="">
        <form id="host-access-rule-form" role="form" class="form-horizontal">
            <div class="modal-body">
                <div class="form-group">
                    <label for="rule_protocol" class="col-sm-4 control-label">Protocol</label>
                    <div class="col-sm-8">
                        <select id="rule_protocol" 
                                data-bind="options: ['tcp','udp','icmp']",
                                data-container="body"
                                class="form-control selectpicker"></select> 
                    </div>
                </div>

                <div class="form-group">
                    <label for="rule_from_port" class="col-sm-4 control-label">From port</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="rule_from_port" placeholder="22">
                    </div>
                </div>

                <div class="form-group">
                    <label for="rule_to_port" class="col-sm-4 control-label">To port</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="rule_to_port" placeholder="22">
                    </div>
                </div>

                <hr/>

                <div class="form-group">
                    <label for="rule_ip_address" class="col-sm-4 control-label">IP address</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="rule_ip_address" placeholder="0.0.0.0/32">
                    </div>
                </div>

                <div class="form-group">
                    <label for="none" class="col-sm-4 control-label"></label>
                    <div class="col-sm-8">
                        or
                    </div>
                </div>

                <div class="form-group">
                    <label for="rule_group" class="col-sm-4 control-label">Group</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="rule_group" placeholder="another group name">
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: function () { $('#new-rule-dialog').dialog('close') }">Cancel</button>
                <button class="btn btn-primary" data-bind="click: securityGroup.addRule"> Save</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        S T A C K   L I S T
        ======================================================================
     -->
    <div id="stacks-binding-target" data-bind='visible: $root.currentSection().id === "Stacks"' class="hide">
        <div class="view">

            <div class="row bottom-separation">
                <div class="col-xs-4 col-sm-4 col-md-4 large-heading">Stacks</div>
                <div class="col-xs-4 col-sm-4 col-md-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
                    <div class="small-top-separation btn-group pull-right">
                        <button class="btn btn-primary" data-bind="click: $root.blueprint.showBlueprintForm">Launch New Stack</button>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-xs-12 col-sm-12 col-md-12 section-synopsis">
                    A Stack is a launched set of instances that you define in a Blueprint. Once a Stack has been launched, you can view it on this page and review the metadata for each Host, modify properties and reprovision, or stop/terminate/start the Stack. For more information on how to manage a Stack, please refer to the <a href="#" data-bind="click: $root.showHelp">help section</a>.
                </div>
            </div>

            <table id="stacks" class="table table-bordered">
                <thead>
                    <tr>
                        <th style="width:20%">Title</th>
                        <th style="width:50%">Description</th>
                        <th style="width:20%">Status History</th>
                        <th style="width:50px"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.Stacks">
                    <tr>
                        <td><a href="#" data-bind="text: $data.title, click: $root.stack.showStackDetails"></a></td>
                        <td data-bind="text: $data.description"></td>
                        <td>
                            <a href='#' 
                               data-bind="bootstrapPopover: {
                                            content: $root.stack.popoverBuilder($data),
                                            title: 'Stack History'
                                          },
                                          text: 'View (' + $data.history.length + ') messages'"></a>
                        </td>
                        <td>
                            <div class="btn-group">
                                <a class="btn btn-info dropdown-toggle" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu" data-bind="foreach: $root.stack.stackActions">
                                    <li>
                                        <a href="#" data-bind="text:$data, click: function (data, event) { $root.stack.doStackAction(data, event, $parent) }"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>


        <!-- 
            ======================================================================
            L A U N C H E D   H O S T   L I S T
            ======================================================================
         -->
        <div id="stack-details-container" title="Stack Hosts">
             <div class="modal-body">
                <table id="stack-details" class="data-grid">
                    <thead>
                        <tr>
                            <th style="width:25px">#</th>
                            <th style="width:20%">State</th>
                            <th style="width:40%">Host name</th>
                            <th style="width:30%">Created</th>
                            <th style="width:50px"></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: stores.StackHosts">
                        <tr>
                            <td>
                                <a href='#' data-bind='click: $root.stack.showHostMetadata, text: id'></a>
                            </td>
                            <td data-bind="text: state"></td>
                            <td>
                                <a href='#' 
                                   target="_blank" 
                                   data-bind="text: hostname, attr: { href: 'http://'+fqdn, title: hostname }"></a>
                            </td>
                            <td data-bind="text: $root.moment(created).calendar()"></td>
                            <td>
                                <select id="host-action"
                                        data-width="125px"
                                        header="Perform action"
                                        title="Perform action"
                                        class="dropup" 
                                        data-container="body"
                                        data-bind="options: $root.stack.stackHostActions, 
                                                   optionsValue: $data,
                                                   optionsText: $data,
                                                   click: function (data, event) { $root.stack.doStackHostAction(data, event, $parent) }"
                                ></select>
                            </td>
                        </tr>     
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" data-bind="click: $root.stack.closeStackHosts">Close</button>
            </div>
        </div>

        <!-- 
            ======================================================================
            H O S T   M E T A D A T A
            ======================================================================
         -->
        <div id="host-metadata-container" title="Host Metadata">
             <div class="small-modal-body">
                <table id="host-metadata" class="data-grid">
                    <thead>
                        <tr>
                            <th style="width:50%">Metadata</th>
                            <th style="width:50%">Value</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: stores.HostMetadata">
                        <tr>
                            <td data-bind="text: key"></td>
                            <td data-bind="text: value"></td>
                        </tr>     
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary" data-bind="click: $root.stack.closeHostMetadata">Close</button>
            </div>
        </div>
    </div>


    <!-- 
        ======================================================================
        F O R M U L A   L I S T
        ======================================================================
    -->
    <div id="formula-binding-target" class="hide" data-bind='visible: currentSection().id === "Formulas"'>
        <div class="view">
            <div class="row bottom-separation">
                <div class="col-xs-4 col-sm-4 col-md-4 large-heading">Formulas</div>
                <div class="col-xs-4 col-sm-4 col-md-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
                    <div class="btn-group pull-right small-top-separation">
                        <button class="btn btn-primary" data-bind="click: $root.formula.showFormulaForm">Import Formula</button>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-xs-12 col-sm-12 col-md-12 section-synopsis">
                    Formulas are imported from external repositories where you can build up an entire ecosystem of components to be installed on a Stack. For details on how to define your own formula to import into stackd.io, please refer to the <a href="#" data-bind="click: $root.showHelp">help section</a>.
                </div>
            </div>

            <table id="formulae" class="table table-bordered ">
                <thead>
                    <tr>
                        <th style="width:20%">Title</th>
                        <th style="width:40%">Description</th>
                        <th style="width:35%">Status</th>
                        <th style="width:5%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.Formulae">
                    <tr data-bind="attr: { class: (public) ? 'success' : '' }">
                        <td>
                            <a href='#' 
                               data-bind="bootstrapPopover: {
                                            content: $root.formula.popoverBuilder($data),
                                            title: 'Formula Components'
                                          },
                                          text: title"></a>
                        </td>
                        <td data-bind="text: description"></td>
                        <td data-bind="text: status_detail"></td>
                        <td>
                            <div class="btn-group" data-bind="visible: $root.isSuperUser">
                                <a class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text: (!public) ? 'Make Public' : 'Make Private', click: $root.formula.share"></a>
                                    </li>
                                    <li>
                                        <a href="#" data-bind="text:'Delete', click: $root.formula.delete"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>
    </div>

    <!-- 
        ======================================================================
        F O R M U L A   F O R M
        ======================================================================
    -->
    <div id="formula-form-container" title="Import Formula" class="stackd-form form-small hide" data-bind="">
        <form id="formula-form">
            <div class="modal-body large-modal-body">
                <div class="form-group">
                    <input type="text" class="form-control" id="formula_url" placeholder="Enter repository URL...">
                </div>
            </div>

            <div class="modal-footer" style="margin-top: 40px;">
                <button class="btn btn-danger" data-bind="click: $root.formula.closeFormulaForm">Cancel</button>
                <button class="btn btn-primary" data-bind="click: $root.formula.importFormula">Import</button>
            </div>
        </form>
    </div>


    <!-- 
        ======================================================================
        S N A P S H O T   L I S T
        ======================================================================
     -->
    <div id="snapshots-binding-target" class="hide" data-bind='visible: $root.currentSection().id === "Snapshots"'>
        <div class="view">
            <div class="row bottom-separation">
                <div class="col-xs-4 col-sm-4 col-md-4 large-heading">Snapshots</div>
                <div class="col-xs-4 col-sm-4 col-md-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
                    <div class="btn-group pull-right small-top-separation">
                        <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
                            New Snapshot <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu original-dropdown-menu" data-bind="foreach: stores.Accounts">
                            <li>
                                <a href="#" data-bind="text: title, click: $root.snapshot.showSnapshotForm"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-xs-12 col-sm-12 col-md-12 section-synopsis">
                    Snapshots are EBS volumes, saved with a particular configuration and data, that you can use as a baseline for new volumes (attached drives) that can be assigned to Hosts when you launch a new Stack.
                </div>
            </div>

            <table id="snapshots" class="table table-bordered">
                <thead>
                    <tr>
                        <th style="width:20%">Title</th>
                        <th style="width:25%">Description</th>
                        <th style="width:10%">ID</th>
                        <th style="width:10%">Size (GB)</th>
                        <th style="width:20%">Account</th>
                        <th style="width:5%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.Snapshots">
                    <tr>
                        <td data-bind="text: title"></td>
                        <td data-bind="text: description"></td>
                        <td data-bind="text: snapshot_id"></td>
                        <td data-bind="text: size_in_gb"></td>
                        <td data-bind="text: account.title"></td>
                        <td>
                            <div class="btn-group" data-bind="visible: $root.isSuperUser">
                                <a class="btn btn-info dropdown-toggle btn-sm" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text:'Delete', click: $root.snapshot.removeSnapshot"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>
    </div>

    <!-- 
        ======================================================================
        S N A P S H O T   F O R M
        ======================================================================
     -->
    <div id="snapshot-form-container" title="Snapshot Details" data-bind="" class="stackd-form form-small hide">
        <form id="snapshot-form" role="form" class="form-horizontal">
            <div class="modal-body large-modal-body">
                <div class="form-group">
                    <label for="snapshot_title" class="col-sm-4 control-label">Title</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="snapshot_title" placeholder="">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="snapshot_description" class="col-sm-4 control-label">Description</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="snapshot_description" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="snapshot_id" class="col-sm-4 control-label">Snapshot ID</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="snapshot_id" placeholder="EC2 snapshot ID">
                    </div>
                </div>

                <div class="form-group">
                    <label for="filesystem_type" class="col-sm-4 control-label">Operating System</label>
                    <div class="col-sm-8">
                        <select id="filesystem_type" 
                                data-bind="options: $root.snapshot.osChoices, 
                                           optionsValue: 'id',
                                           optionsText: 'title',
                                           optionsCaption: 'Choose OS...'"
                                data-size="12"
                                data-container="body"
                                class="form-control"></select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="snapshot_size" class="col-sm-4 control-label">Size</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="snapshot_size" placeholder="">
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.snapshot.closeSnapshotForm">Close</button>
                <button class="btn btn-primary" data-bind="click: $root.snapshot.addSnapshot">Save</button>
            </div>
        </form>
    </div>

    <!-- 
        ======================================================================
        A C C O U N T   L I S T
        ======================================================================
     -->
    <div id="accounts-binding-target" class="hide" data-bind='visible: $root.currentSection().id == "Accounts"'>
        <div class="view">
            <div class="row bottom-separation">
                <div class="col-xs-4 col-sm-4 col-md-4 large-heading">Accounts</div>
                <div class="col-xs-4 col-sm-4 col-md-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
                    <div class="btn-group pull-right bottom-separation" data-bind="visible: isSuperUser">
                        <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
                            New Account
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu original-dropdown-menu" data-bind="foreach: stores.ProviderTypes">
                            <li>
                                <a href="#" data-bind="text: title, click: $root.account.showAccountForm"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-xs-12 col-sm-12 col-md-12 section-synopsis">
                    The Accounts page is where you can define all of the different accounts that you have established for each of the supported cloud providers. Please have the private key, and account id, issued by your provider before setting one up. For more information on Accounts, please refer to the <a href="#" data-bind="click: $root.showHelp">help section</a>.
                </div>
            </div>

            <table id="accounts" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Profiles</th>
                        <th style="width:5%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.Accounts">
                    <tr>
                        <td data-bind="text: title"></td>
                        <td data-bind="text: description"></td>
                        <td>
                            <a data-bind="click: $root.profile.listProfiles, 
                                          text: $root.account.accountProfileLink(id)"></a>
                        </td>
                        <td>
                            <div class="btn-group" data-bind="visible: $root.isSuperUser">
                                <a class="btn btn-info dropdown-toggle btn-sm" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text:'Delete', click: $root.account.deleteAccount"></a>
                                    </li>
                                    <li>
                                        <a href="#" data-bind="text:'Edit Security Groups', click: $root.securityGroup.setForAccount"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>
    </div>

    <!-- 
        ======================================================================
        A C C O U N T   F O R M
        ======================================================================
    -->
    <div id="accounts-form-container" title="New Provider Account Details" class="stackd-form form-small hide" data-bind="">
        <form id="account-form" role="form" class="form-horizontal">
            <div class="modal-body large-modal-body">
                <div class="form-group">
                    <label for="account_title" class="col-sm-4 control-label">Title</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="account_title" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="account_description" class="col-sm-4 control-label">Description</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="account_description" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="account_id" class="col-sm-4 control-label">Account ID</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="account_id" placeholder="Log into your account to obtain the id">
                    </div>
                </div>

                <div class="form-group">
                    <label for="access_key_id" class="col-sm-4 control-label">AWS Access Key</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="access_key_id" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="secret_access_key" class="col-sm-4 control-label">AWS Secret Key</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="secret_access_key" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="keypair" class="col-sm-4 control-label">AWS Keypair Name</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="keypair" placeholder="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="default_availability_zone" class="col-sm-4 control-label">Default Zone</label>
                    <div class="col-sm-8">
                        <select id="default_availability_zone" 
                            data-bind="options: stores.Zones, 
                                       optionsText: 'title', 
                                       optionsValue: 'id', 
                                       optionsCaption: 'Choose default zone...'" 
                            data-container="body"
                            class="form-control selectpicker"></select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="route53_domain" class="col-sm-4 control-label">Route 53 Domain</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="route53_domain" placeholder="e.g. dev.synthesyscloud.com">
                    </div>
                </div>

                <div class="form-group">
                    <label for="private_key_file" class="col-sm-4 control-label">Private Key File</label>
                    <div class="col-sm-8">
                        <textarea class="form-control" 
                                  id="private_key_file" 
                                  rows="6" 
                                  placeholder="Enter in the private key that will be used to set up instances for this account"></textarea>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.account.closeAccountForm">Close</button>
                <button class="btn btn-primary" data-bind="click: $root.account.addAccount">Save</button>
            </div>
        </form>
    </div>


    <!-- 
        ======================================================================
        P R O F I L E   L I S T
        ======================================================================
    -->
    <div id="profile-binding-target" class="hide" data-bind='visible: currentSection().id === "Accounts" && stores.AccountProfiles().length > 0'>
        <div class="view">
            <div class="row bottom-separation">
                <div class="col-xs-4 col-sm-4 col-md-4 medium-heading">Account Profiles</div>
                <div class="col-xs-4 col-sm-4 col-md-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4">
                    <div class="btn-group pull-right" data-bind="visible: $root.isSuperUser">
                        <button class="btn btn-primary" data-bind="click: $root.profile.showProfileForm">New Profile</button>
                    </div>
                </div>
            </div>

            <div class="row bottom-separation">
                <div class="col-xs-12 col-sm-12 col-md-12 section-synopsis">
                    Profiles are specific types of instances that you want to use for each Account. You can specify the instance type, the default log in, the the size of instance to use. For more information on Profiles, please refer to the <a href="#" data-bind="click: $root.showHelp">help section</a>.
                </div>
            </div>

            <table id="profiles" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Description</th>
                        <th>ID</th>
                        <th style="width:5%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.AccountProfiles">
                    <tr>
                        <td data-bind="text: title"></td>
                        <td data-bind="text: description"></td>
                        <td data-bind="text: typeof image_id === 'object' ? 'n/a' : image_id"></td>
                        <td>
                            <div class="btn-group" data-bind="visible: $root.isSuperUser">
                                <a class="btn btn-info dropdown-toggle btn-sm" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text:'Delete', click: $root.profile.deleteProfile"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>

        <!-- 
            ======================================================================
            P R O F I L E   F O R M
            ======================================================================
        -->
        <div id="profile-form-container" title="New Profile Details" class="stackd-form form-small">
            <form id="profile-form" role="form" class="form-horizontal">
                <div class="modal-body large-modal-body">
                    <div class="form-group">
                        <label for="profile_title" class="col-sm-4 control-label">Title</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="profile_title" placeholder="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="profile_description" class="col-sm-4 control-label">Description</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="profile_description" placeholder="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="image_id" class="col-sm-4 control-label">AMI</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="image_id" placeholder="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="ssh_user" class="col-sm-4 control-label">SSH User</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="ssh_user" placeholder="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="default_instance_size" class="col-sm-4 control-label">Default Instance Size</label>
                        <div class="col-sm-8">
                            <select id="default_instance_size" 
                                data-bind="options: stores.InstanceSizes, 
                                           optionsText: 'title', 
                                           optionsValue: 'id', 
                                           optionsCaption: 'Choose...'" 
                                data-size="8"
                                data-container="body"
                                class="form-control"></select>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn" data-bind="click: $root.profile.closeProfileForm">Close</button>
                    <button class="btn btn-primary" data-bind="click: $root.profile.addProfile">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 
        ======================================================================
        S E C U R I T Y   G R O U P   L I S T
        ======================================================================
    -->
    <div id="security-group-container" class="hide" data-bind='visible: currentSection().id === "Security"'>
        <div class="view">
            <div class="btn-group pull-right bottom-separation">
                <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
                    New Security Group
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" data-bind="foreach: stores.Accounts">
                    <li>
                        <a href="#" data-bind="text: title, click: $root.securityGroup.showSecurityGroupForm"></a>
                    </li>
                </ul>
            </div>

            <div class="pull-left">

                <div class="pagination" data-bind="visible: $root.securityGroup.showPagination">
                    <ul>
                        <li data-bind="css: { disabled: $root.securityGroup.previousLink() === null }">
                            <a href="#" 
                                data-bind="click: function () { $root.securityGroup.paginate($root.securityGroup.previousLink()); } ">Previous</a>
                        </li>
                        <li data-bind="css: { disabled: $root.securityGroup.nextLink() === null }">
                            <a href="#" data-bind="click: function () { $root.securityGroup.paginate($root.securityGroup.nextLink()); }">Next</a>
                        </li>
                    </ul>
                </div>
            </div>


            <table id="security_group_list" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Description</th>
                        <th>Account</th>
                        <th data-bind="visible: stackdio.settings.superuser === true">Owner</th>
                        <th style="width:5%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: stores.SecurityGroups">
                    <tr>
                        <td data-bind="text: name"></td>
                        <td data-bind="text: description"></td>
                        <td data-bind="text: account.title"></td>
                        <td data-bind="text: owner, visible: stackdio.settings.superuser === true"></td>
                        <td>
                            <div class="btn-group">
                                <a class="btn btn-info btn-small dropdown-toggle" data-toggle="dropdown" href="#">
                                    Action <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu original-dropdown-menu">
                                    <li>
                                        <a href="#" data-bind="text:'Delete', click: $root.securityGroup.deleteSecurityGroup"></a>
                                    </li>
                                    <li>
                                        <a href="#" data-bind="text:'Define Rules', click: $root.securityGroup.editGroupRules"></a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>     
                </tbody>
            </table>
        </div>

        <!-- 
            ======================================================================
            S E C U R I T Y   G R O U P   R U L E S   L I S T   D I A L O G
            ======================================================================
        -->
        <div id="securitygroup-rules-form-container" title="Security Group Rules" class="stackd-form">
            <div class="modal-body">
                <table id="security_group_rules_list" class="table table-striped data-grid">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Protocol</th>
                            <th style="width:5%"></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: stores.SecurityGroupRules">
                        <tr>
                            <td data-bind="text: (rule.split(':').length === 1) ? rule : rule.split(':')[1]"></td>
                            <td data-bind="text: from_port"></td>
                            <td data-bind="text: to_port"></td>
                            <td data-bind="text: protocol"></td>
                            <td>
                                <button type="button" 
                                        class="btn-small btn-danger iconic-trash-stroke"
                                        data-bind="click: $root.securityGroup.deleteGroupRule"
                                ></button>
                            </td>
                        </tr>     
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <button class="btn" data-bind="click: $root.securityGroup.closeRulesForm">Close</button>
                <button class="btn btn-success iconic-plus" data-bind="click: function () { 
                                    $('#new-rule-dialog').dialog('open');
                                }"> Add</button>
            </div>
        </div>



        <!-- 
            ======================================================================
            D E F A U L T   S E C U R I T Y   G R O U P   F O R M
            ======================================================================
        -->
        <div id="default-securitygroup-form-container" title="Default Security Groups" class="stackd-form form-small">
            <form id="default-securitygroup-form" class="form-horizontal" role="form">
                <div class="modal-body large-modal-body">

                    <div class="form-group">
                        <div class="lead">Option 1. Use an existing group</div>
                        If you previously imported AWS groups, or created your own through stackd.io, you can select one of 
                        those groups that are listed here.
                    </div>

                    <div class="form-group">
                        <label for="stackdio_security_group" class="col-sm-3 control-label">Your stackd.io groups</label>
                        <div class="col-sm-7">
                            <select id="stackdio_security_group" 
                                    class="form-control"
                                    data-bind="options: stores.AccountSecurityGroups, 
                                               optionsValue: 'id', 
                                               optionsText: 'title'",
                                    data-size="12"
                                    data-container="body"></select> 
                        </div>
                        <div class="col-sm-2">
                            <button class="btn btn-success glyphicon glyphicon-plus" 
                                data-bind="click: function (data, event) { 
                                    securityGroup.addDefaultSecurityGroup($('#stackdio_security_group option:selected').text(), event); 
                                }"> Add</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="lead">Option 2. Create new group</div>
                        If you would like to create a new security group that does not already exist in stackd.io, 
                        simply type in the name for the group here and it will created. If there are existing AWS
                        groups that match what you are entering, you will see suggestions.
                    </div>

                    <div class="form-group">
                        <label for="new_securitygroup_name" class="col-sm-3 control-label">Create new group</label>
                        <div class="col-sm-7">
                            <input id="new_securitygroup_name" 
                                   type="text"
                                   class="form-control typeahead"
                                   data-bind="event: { keypress: securityGroup.capture }"> 

                        </div>
                        <div class="col-sm-2">
                            <button class="btn btn-success glyphicon glyphicon-plus" 
                                    data-bind="click: function (data, event) { 
                                        securityGroup.addDefaultSecurityGroup(document.getElementById('new_securitygroup_name').value, event); 
                                    }"> Add</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="lead">Assigned Default Groups</div>
                        <div>To remove any default security groups assigned to this account, click on the 'x' in the label below.</div>
                        <div style="margin: 10px 0 0 0;" id="default_group_list"></div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button class="btn" data-bind="click: $('#default-securitygroup-form-container').dialog('close')">Cancel</button>
                    <button class="btn btn-primary iconic-check" data-bind="click: $('#default-securitygroup-form-container').dialog('close')"> Done</button>
                </div>
            </form>
        </div>
    </div>



    <script data-main="/static/stackdio/require-config" src="/static/stackdio/require.js"></script>
    <script>
    window.stackdio_user = {};
    window.stackdio_user.su = "{{ user.is_superuser }}";
    </script>


<!--
    <script src="/static/js/require.js"></script>
        <script>
            /*
             * 
             *  WHEN READY TO TRY A PRODUCTION BUILD, FOLLOW THESE INSTRUCTIONS
             *
             *      1. Ensure you have node.js installed on your system.
             *      2. npm install -g requirejs
             *      3. cd /{stackdio_root_dir}/core/static
             *      4. node r.js -o build.js
             *      5. Then uncomment this block of code, and comments out the <script> tag above.
             *
             */
            require.config({
                paths: {
                    //Comment out this line to go back to loading
                    //the non-optimized main.js source file.
                    "app": "/static/stackdio-built"
                }
            });
            require(["app"]);
        </script>
-->

</body>
</html>
